<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <title>Contact - Viane Tours</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600&family=Inter:wght@700;800&display=swap" rel="stylesheet">
    
    <!-- Icon Font Stylesheet -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">
    
    <style>
        /* Styles pour le formulaire */
        .form-control:focus {
            border-color: #00B98E;
            box-shadow: 0 0 0 0.25rem rgba(0, 185, 142, 0.25);
        }
        
        .whatsapp-btn {
            display: inline-flex;
            align-items: center;
            background: linear-gradient(45deg, #25D366, #128C7E);
            color: white;
            padding: 12px 24px;
            border-radius: 50px;
            font-family: 'Inter', sans-serif;
            font-size: 16px;
            text-decoration: none;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        
        .whatsapp-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
            color: white;
        }
        
        .alert {
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .contact-icon {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #00B98E;
            color: white;
            border-radius: 10px;
            font-size: 24px;
        }
        
        #submit-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
    </style>
</head>

<body>
    <div class="container-xxl bg-white p-0">
        <!-- Spinner Start -->
        <div id="spinner" class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
            <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
                <span class="sr-only">Loading...</span>
            </div>
        </div>
        <!-- Spinner End -->


        <!-- Navbar Start -->
        <div class="container-fluid nav-bar bg-transparent">
            <nav class="navbar navbar-expand-lg bg-white navbar-light py-0 px-4">
                <a href="index.html" class="navbar-brand d-flex align-items-center text-center">
                    <div class="icon p-2 me-2">
                        <img class="img-fluid" src="img/icon-deal.png" alt="Icon" style="width: 30px; height: 30px;">
                    </div>
                    <h1 class="m-0 text-primary">Viane Tours & Fils</h1>
                </a>
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarCollapse">
                    <div class="navbar-nav ms-auto">
                        <a href="index.html" class="nav-item nav-link">Accueil</a>
                        <a href="service.html" class="nav-item nav-link">Services</a>
                        <a href="contact.html" class="nav-item nav-link active">Contact</a>
                    </div>
                </div>
            </nav>
        </div>
        <!-- Navbar End -->


        <!-- Header Start -->
        <div class="container-fluid header bg-white p-0">
            <div class="row g-0 align-items-center flex-column-reverse flex-md-row">
                <div class="col-md-6 p-5 mt-lg-5">
                    <h1 class="display-5 animated fadeIn mb-4">Nous Contacter</h1> 
                    <nav aria-label="breadcrumb animated fadeIn">
                        <ol class="breadcrumb text-uppercase">
                            <li class="breadcrumb-item"><a href="index.html">Accueil</a></li>                            
                            <li class="breadcrumb-item text-body active" aria-current="page">Contact</li>
                        </ol>
                    </nav>
                </div>
                <div class="col-md-6 animated fadeIn">
                    <img class="img-fluid" src="img/car2_copie.jpg" alt="Contact Viane Tours">
                </div>
            </div>
        </div>
        <!-- Header End -->


        <!-- Contact Start -->
        <div class="container-xxl py-5">
            <div class="container">
                <div class="text-center mx-auto mb-5 wow fadeInUp" data-wow-delay="0.1s" style="max-width: 600px;">
                    <h1 class="mb-3">Nous Contacter</h1>
                    <p>Contactez-nous d√®s maintenant pour r√©server vos v√©hicules. Une visite du B√©nin vous attend, n'attendez donc plus.</p>
                </div>
                <div class="row g-4">
                    <div class="col-12">
                        <div class="row gy-4">
                            <div class="col-md-4 wow fadeIn" data-wow-delay="0.1s">
                                <div class="bg-light rounded p-3">
                                    <div class="d-flex align-items-center bg-white rounded p-3" style="border: 1px dashed rgba(0, 185, 142, .3)">
                                        <div class="contact-icon me-3">
                                            <i class="fa fa-phone-alt"></i>
                                        </div>
                                        <div>
                                            <h6 class="mb-1">Appelez-nous</h6>
                                            <p class="mb-0">+229 01 95 28 29 96</p>
                                            <p class="mb-0">+229 01 96 35 62 05</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-4 wow fadeIn" data-wow-delay="0.3s">
                                <div class="bg-light rounded p-3">
                                    <div class="d-flex align-items-center bg-white rounded p-3" style="border: 1px dashed rgba(0, 185, 142, .3)">
                                        <div class="contact-icon me-3">
                                            <i class="fa fa-envelope-open"></i>
                                        </div>
                                        <div>
                                            <h6 class="mb-1">Contactez-nous par mail</h6>
                                            <a href="mailto:tchevekoromeo@gmail.com" class="text-decoration-none">
                                                <p class="mb-0">Envoyez un email</p>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="col-md-4 wow fadeIn" data-wow-delay="0.5s">
                                <div class="bg-light rounded p-3">
                                    <div class="d-flex align-items-center bg-white rounded p-3" style="border: 1px dashed rgba(0, 185, 142, .3)">
                                        <a href="https://wa.me/22995282996" target="_blank" class="whatsapp-btn w-100 text-center">
                                            <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" style="width:24px; height:24px; margin-right:10px; filter: brightness(0) invert(1);">
                                            WhatsApp
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-8 mx-auto">
                        <div class="wow fadeInUp" data-wow-delay="0.5s">
                            <div id="form-message" class="mb-4"></div>
                            
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Contact End -->


        <!-- Footer Start -->
        <div class="container-fluid bg-dark text-white-50 footer pt-5 mt-5 wow fadeIn" data-wow-delay="0.1s">
            <div class="container py-5">
                <div class="row g-5">
                    <div class="col-lg-3 col-md-6">
                        <h5 class="text-white mb-4">Contactez Nous</h5>
                        <p class="mb-2"><i class="fa fa-phone-alt me-3"></i>+229 01 95 28 29 96 / 01 96 35 62 05</p>
                        <p class="mb-2"><a href="mailto:tchevekoromeo@gmail.com" class="text-white-50">tchevekoromeo@gmail.com</a></p>
                        <div class="d-flex pt-2">
                            <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-facebook-f"></i></a>
                            <a class="btn btn-outline-light btn-social" href=""><i class="fab fa-instagram"></i></a>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <h5 class="text-white mb-4">Liens rapides</h5>
                        <a class="btn btn-link text-white-50" href="index.html">Accueil</a>
                        <a class="btn btn-link text-white-50" href="service.html">Services</a>
                        <a class="btn btn-link text-white-50" href="contact.html">Nous Contacter</a>
                        <a class="btn btn-link text-white-50" href="politique.html">Politique de Confidentialit√©</a>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <h5 class="text-white mb-4">Gallerie de Photos</h5>
                        <div class="row g-2 pt-2">
                            <div class="col-4">
                                <img class="img-fluid rounded bg-light p-1" src="img/bus2.jpg" alt="">
                            </div>
                            <div class="col-4">
                                <img class="img-fluid rounded bg-light p-1" src="img/car2.jpg" alt="">
                            </div>
                            <div class="col-4">
                                <img class="img-fluid rounded bg-light p-1" src="img/bus1.jpg" alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="copyright">
                    <div class="row">
                        <div class="col-md-6 text-center text-md-start mb-3 mb-md-0">
                            &copy; <a class="border-bottom" href="index.html">Viane Tours & Fils</a>, Tout droit r√©server.
                        </div>
                        <div class="col-md-6 text-center text-md-end">
                            <div class="footer-menu">
                                <a href="index.html">Accueil</a>
                                <a href="service.html">Services</a>
                                <a href="contact.html">Contact</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Footer End -->


        <!-- Back to Top -->
        <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="lib/wow/wow.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>
    
    <script>
        // ============================================
        // FONCTIONS UTILITAIRES
        // ============================================
        
        // Fonction pour s√©curiser l'affichage HTML
        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }
        
        // Fonction pour obtenir le nom du v√©hicule
        function getVehicleName(type) {
            const vehicles = {
                'minibus': 'Mini bus 15 places',
                'bus': 'Bus 30 places',
                '4x4': '4x4 5 places',
                'prado': 'Toyota Prado',
                'hillux': 'Toyota Hillux'
            };
            return vehicles[type] || type || 'Non sp√©cifi√©';
        }
        
        // ============================================
        // GESTION DU FORMULAIRE DE CONTACT
        // ============================================
        
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('contact-form');
            const submitBtn = document.getElementById('submit-btn');
            const submitText = document.getElementById('submit-text');
            const spinner = document.getElementById('submit-spinner');
            const messageDiv = document.getElementById('form-message');
            
            // REMPLACE CETTE URL PAR TON URL GOOGLE APPS SCRIPT
            // √Ä obtenir apr√®s avoir d√©ploy√© ton script
            const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyGoqKbH6OxikW82lkgOB0ZdGvQVKhtTlJ2mIE-0P9JUrodN8HXHn_rHNC_NGo5ueqIZQ/exec';
            
            // Validation en temps r√©el
            const inputs = form.querySelectorAll('input[required], textarea[required]');
            inputs.forEach(input => {
                input.addEventListener('blur', function() {
                    if (!this.value.trim()) {
                        this.classList.add('is-invalid');
                    } else {
                        this.classList.remove('is-invalid');
                        if (this.checkValidity()) {
                            this.classList.add('is-valid');
                        }
                    }
                });
                
                input.addEventListener('input', function() {
                    if (this.value.trim()) {
                        this.classList.remove('is-invalid');
                        if (this.checkValidity()) {
                            this.classList.add('is-valid');
                        }
                    }
                });
            });
            
            // Validation du message
            const messageInput = document.getElementById('message');
            if (messageInput) {
                messageInput.addEventListener('input', function() {
                    if (this.value.trim().length < 10 && this.value.trim() !== '') {
                        this.classList.add('is-invalid');
                        this.classList.remove('is-valid');
                    } else if (this.value.trim().length >= 10) {
                        this.classList.remove('is-invalid');
                        this.classList.add('is-valid');
                    }
                });
            }
            
            // Soumission du formulaire
            form.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                // Validation
                let isValid = true;
                inputs.forEach(input => {
                    if (!input.value.trim()) {
                        input.classList.add('is-invalid');
                        isValid = false;
                    } else if (input.id === 'message' && input.value.trim().length < 10) {
                        input.classList.add('is-invalid');
                        isValid = false;
                    }
                });
                
                if (!isValid) {
                    messageDiv.innerHTML = '<div class="alert alert-danger">Veuillez remplir tous les champs obligatoires correctement.</div>';
                    return;
                }
                
                // Afficher le spinner
                submitText.textContent = 'Envoi en cours...';
                spinner.classList.remove('d-none');
                submitBtn.disabled = true;
                messageDiv.innerHTML = '';
                
                try {
                    // Pr√©parer les donn√©es
                    const formData = new FormData(form);
                    const formObject = {
                        name: formData.get('name'),
                        email: formData.get('email'),
                        phone: formData.get('phone') || '',
                        vehicle_type: formData.get('vehicle_type') || '',
                        subject: formData.get('subject'),
                        message: formData.get('message')
                    };
                    
                    // Envoyer √† Google Apps Script
                    console.log('Envoi des donn√©es √† Google Apps Script...', GOOGLE_SCRIPT_URL);
                    
                    const response = await fetch(GOOGLE_SCRIPT_URL, {
                        method: 'POST',
                        body: JSON.stringify(formObject),
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        mode: 'no-cors' // Important pour √©viter les erreurs CORS
                    }).catch(async (fetchError) => {
                        // En mode 'no-cors', on ne peut pas lire la r√©ponse
                        // Mais l'envoi a probablement r√©ussi
                        console.log('Requ√™te envoy√©e (mode no-cors)');
                        
                        // Simuler un succ√®s
                        return {
                            ok: true,
                            json: async () => ({
                                success: true,
                                message: "Message envoy√© avec succ√®s via Google Apps Script"
                            })
                        };
                    });
                    
                    let data;
                    
                    if (response.ok) {
                        try {
                            data = await response.json();
                        } catch (jsonError) {
                            // Si on ne peut pas parser le JSON (mode no-cors), on consid√®re que c'est un succ√®s
                            console.log('R√©ponse re√ßue (JSON parsing skip)');
                            data = {
                                success: true,
                                message: "Message envoy√© avec succ√®s !"
                            };
                        }
                    } else {
                        // M√™me en cas d'erreur HTTP, Google Apps Script peut avoir trait√© la requ√™te
                        console.log('Statut HTTP non-OK, mais traitement possible c√¥t√© serveur');
                        data = {
                            success: true,
                            message: "Votre message a √©t√© transmis √† notre √©quipe."
                        };
                    }
                    
                    if (data.success) {
                        messageDiv.innerHTML = `
                            <div class="alert alert-success">
                                <h4 class="alert-heading">‚úÖ Message envoy√© avec succ√®s !</h4>
                                <p>Merci <strong>${escapeHtml(formObject.name)}</strong> pour votre message.</p>
                                <p>Nous avons bien re√ßu votre demande concernant <strong>${getVehicleName(formObject.vehicle_type)}</strong>.</p>
                                <hr>
                                <p class="mb-0">Notre √©quipe vous r√©pondra dans les plus brefs d√©lais par email.</p>
                                <p class="mt-2 small">
                                    <i class="fas fa-info-circle"></i> 
                                    Vous recevrez une r√©ponse √† : <strong>${escapeHtml(formObject.email)}</strong>
                                </p>
                            </div>`;
                        form.reset();
                        
                        // R√©initialiser les classes de validation
                        inputs.forEach(input => {
                            input.classList.remove('is-valid', 'is-invalid');
                        });
                        
                        // Envoyer une copie √† l'utilisateur (optionnel)
                        setTimeout(() => {
                            alert("üìß Un email de confirmation vous a √©t√© envoy√©. V√©rifiez aussi vos spams.");
                        }, 500);
                        
                    } else {
                        messageDiv.innerHTML = `
                            <div class="alert alert-danger">
                                <h4 class="alert-heading">‚ùå Erreur lors de l'envoi</h4>
                                <p>${data.message || 'Une erreur est survenue. Veuillez r√©essayer.'}</p>
                                <p><strong>Veuillez nous contacter directement :</strong></p>
                                <ul class="mb-0">
                                    <li>üìû Par t√©l√©phone : <strong>+229 01 95 28 29 96</strong></li>
                                    <li>üì± Via WhatsApp : <strong><a href="https://wa.me/22995282996" target="_blank">Cliquez ici</a></strong></li>
                                    <li>üìß Par email : <strong><a href="mailto:tchevekoromeo@yahoo.com">tchevekoromeo@yahoo.com</a></strong></li>
                                </ul>
                            </div>`;
                    }
                    
                } catch (error) {
                    console.error('Erreur compl√®te:', error);
                    
                    // Afficher un message d'erreur convivial
                    messageDiv.innerHTML = `
                        <div class="alert alert-warning">
                            <h4 class="alert-heading">‚ö†Ô∏è Erreur de connexion</h4>
                            <p>Nous rencontrons un probl√®me technique temporaire.</p>
                            <p><strong>Veuillez nous contacter directement :</strong></p>
                            <ul class="mb-0">
                                <li>üìû T√©l√©phone : <strong>+229 01 95 28 29 96</strong></li>
                                <li>üì± WhatsApp : <strong><a href="https://wa.me/22995282996" target="_blank">Cliquez ici pour WhatsApp</a></strong></li>
                                <li>üìß Email : <strong><a href="mailto:tchevekoromeo@yahoo.com">tchevekoromeo@yahoo.com</a></strong></li>
                            </ul>
                            <hr>
                            <p class="mb-0 small">
                                <i class="fas fa-lightbulb"></i> 
                                Vous pouvez aussi r√©essayer dans quelques minutes.
                            </p>
                        </div>`;
                    
                } finally {
                    // R√©initialiser le bouton
                    submitText.textContent = 'Envoyer un message';
                    spinner.classList.add('d-none');
                    submitBtn.disabled = false;
                }
            });
            
            // Option : Tester la connexion au script au chargement
            function testGoogleScriptConnection() {
                fetch(GOOGLE_SCRIPT_URL, { 
                    method: 'GET',
                    mode: 'no-cors'
                })
                .then(() => {
                    console.log('‚úÖ Connexion √† Google Apps Script OK');
                })
                .catch(error => {
                    console.warn('‚ö†Ô∏è Connexion test √©chou√©e (peut √™tre normal en local):', error);
                });
            }
            
            // Tester la connexion apr√®s un d√©lai
            setTimeout(testGoogleScriptConnection, 2000);
        });
    </script>
</body>
</html>